<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Jean-Michel Bruel">
<title>CPOA - (Design Pattern)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>CPOA - (Design Pattern)</h1>
<div class="details">
<span id="author" class="author">Jean-Michel Bruel</span><br>
<span id="email" class="email"><a href="mailto:jbruel@gmail.com">jbruel@gmail.com</a></span><br>
<span id="revnumber">version 1.9,</span>
<span id="revdate">2020-04-17 (started on 2015-10-05)</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Observateur">1. Observer</a>
<ul class="sectlevel2">
<li><a href="#_motivation">1.1. Motivation</a></li>
<li><a href="#_definition">1.2. Definition</a></li>
<li><a href="#_application">1.3. Application</a></li>
<li><a href="#observerJava">1.4. <em>Observer</em> in Java</a></li>
</ul>
</li>
<li><a href="#_a_concrete_implementation_of_the_mvc_java_jtable">2. A concrete implementation of the MVC: Java JTable</a>
<ul class="sectlevel2">
<li><a href="#_principle">2.1. Principle</a></li>
<li><a href="#_architecture">2.2. Architecture</a></li>
</ul>
</li>
<li><a href="#Adaptateur">3. Adaptor</a>
<ul class="sectlevel2">
<li><a href="#_problem">3.1. Problem</a></li>
<li><a href="#_concrete_example_back_on_ducks">3.2. Concrete example: back on Ducks</a></li>
<li><a href="#_the_adapter_pattern">3.3. The Adapter pattern</a></li>
</ul>
</li>
<li><a href="#_the_visitor_pattern">4. The Visitor pattern</a>
<ul class="sectlevel2">
<li><a href="#_the_problem">4.1. The problem</a></li>
<li><a href="#_illustration">4.2. Illustration</a></li>
<li><a href="#_the_visitor_pattern_2">4.3. The Visitor pattern</a></li>
<li><a href="#_avantagesdrawbacks">4.4. Avantages/Drawbacks</a></li>
<li><a href="#_examples">4.5. Examples</a></li>
<li><a href="#_example_in_java">4.6. Example in Java</a></li>
</ul>
</li>
<li><a href="#Proxy">5. Proxy</a>
<ul class="sectlevel2">
<li><a href="#_the_problem_2">5.1. The problem</a></li>
<li><a href="#_the_proxy_pattern">5.2. The <em>Proxy</em> pattern</a></li>
<li><a href="#_usage">5.3. Usage</a></li>
<li><a href="#_concrete_example_rmi">5.4. Concrete Example: RMI</a></li>
</ul>
</li>
<li><a href="#Itérateur">6. Iterator</a>
<ul class="sectlevel2">
<li><a href="#_the_problem_3">6.1. The problem</a></li>
<li><a href="#_the_iterator_pattern">6.2. The Iterator pattern</a></li>
<li><a href="#_concrete_example">6.3. Concrete Example</a></li>
</ul>
</li>
<li><a href="#Composite">7. The Composite pattern</a>
<ul class="sectlevel2">
<li><a href="#_the_problem_4">7.1. The problem</a></li>
<li><a href="#_the_composite_pattern">7.2. The Composite pattern</a></li>
<li><a href="#_concrete_example_2">7.3. Concrete Example</a></li>
<li><a href="#_an_anti_example">7.4. An "Anti" example</a></li>
</ul>
</li>
<li><a href="#_back_on_the_refactoring_bank">8. Back on the refactoring Bank</a>
<ul class="sectlevel2">
<li><a href="#_the_problem_5">8.1. The problem</a></li>
<li><a href="#_a_solution">8.2. A solution</a></li>
</ul>
</li>
<li><a href="#_one_step_beyond">9. One step beyond&#8230;&#8203;</a>
<ul class="sectlevel2">
<li><a href="#_share_the_same_vocabulary">9.1. Share the same vocabulary</a></li>
<li><a href="#_dont_go_too_fast">9.2. Don&#8217;t go too fast</a></li>
<li><a href="#_other_types_of_patterns">9.3. Other types of patterns</a></li>
<li><a href="#_anti_patterns">9.4. Anti-patterns</a></li>
<li><a href="#_the_remaining_ones">9.5. The remaining ones</a></li>
</ul>
</li>
<li><a href="#_glossary_definitions">Glossary &amp; definitions</a>
<ul class="sectlevel2">
<li><a href="#_creation_patterns">Creation patterns</a></li>
<li><a href="#_behavioral_patterns">Behavioral patterns</a></li>
<li><a href="#_structural_patterns">Structural patterns</a></li>
</ul>
</li>
<li><a href="#refs">Références</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Observateur">1. Observer</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/observer.jpg" alt="observer">
</div>
</div>
<div class="sect2">
<h3 id="_motivation">1.1. Motivation</h3>
<div class="imageblock">
<div class="content">
<img src="images/observer-illustration.png" alt="observer illustration">
</div>
<div class="title">Figure 1. Classical illustration of the <em>Observer</em> Pattern (source <a href="#Meyer">[Meyer]</a>)</div>
</div>
</div>
<div class="sect2">
<h3 id="_definition">1.2. Definition</h3>
<div class="paragraph">
<p><strong>Observer</strong> defines a relationship between objects of type
one-to-many, so that when an object changes state,
all those who depend on it are notified and updated
automatically.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/observer.png" alt="observer">
</div>
<div class="title">Figure 2. UML model of <em>Observer</em></div>
</div>
</div>
<div class="sect2">
<h3 id="_application">1.3. Application</h3>
<div class="paragraph">
<p>The <em>Observer</em> pattern can be used in many situations:</p>
</div>
<div class="ulist % step">
<ul class="% step">
<li>
<p>When a concept has two aspects, one dependent on the other.
Encapsulating these aspects in separate objects allows them to be used
and let them evolve independently.</p>
</li>
<li>
<p>As soon as the change of one object entails the change of several others.</p>
</li>
<li>
<p>As soon as an object must notify a certain number of others without knowing them.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="observerJava">1.4. <em>Observer</em> in Java</h3>
<div class="paragraph">
<p><a href="https://www.java.com/fr/">Java</a> provides <em>Observable / Observer</em> classes for the <em>Observer</em> pattern.
The <code>java.util.Observable</code> class is the base class for subjects.
So any class that wants to be observed is that class whose
here are the features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>provides methods for adding / removing observers</p>
</li>
<li>
<p>provides methods for notifying observers</p>
</li>
<li>
<p>a concrete subclass must only take care of notifying each
method modifying the state of objects (<em>mutators</em>)</p>
</li>
<li>
<p>uses a vector storing the references of the observers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>java.util.Observer</code> interface corresponds to observers
who must implement this interface.</p>
</div>
<div class="sect3">
<h4 id="_the_java_util_observable_class">1.4.1. The java.util.Observable class</h4>
<div class="paragraph">
<p>Here is the list of methods of the <code>java.util.Observable</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><pre><span></span><span class="tok-kd">public</span> <span class="tok-nf">Observable</span><span class="tok-o">()</span>
<span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">addObserver</span><span class="tok-o">(</span><span class="tok-n">Observer</span> <span class="tok-n">o</span><span class="tok-o">)</span>
<span class="tok-kd">protected</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">setChanged</span><span class="tok-o">()</span>
<span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">deleteObserver</span><span class="tok-o">(</span><span class="tok-n">Observer</span> <span class="tok-n">o</span><span class="tok-o">)</span>
<span class="tok-kd">protected</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">void</span> <span class="tok-nf">clearChanged</span><span class="tok-o">()</span>
<span class="tok-kd">public</span> <span class="tok-kd">synchronized</span> <span class="tok-kt">boolean</span> <span class="tok-nf">hasChanged</span><span class="tok-o">()</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">notifyObservers</span><span class="tok-o">(</span><span class="tok-n">Object</span> <span class="tok-n">arg</span><span class="tok-o">)</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">notifyObservers</span><span class="tok-o">()</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_java_util_observer_interface">1.4.2. The java.util.Observer interface</h4>
<div class="listingblock">
<div class="title">java.util.Observer</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><pre><span></span><span class="tok-cm">/**</span>
<span class="tok-cm">* This method is called whenever the observed object is changed. An</span>
<span class="tok-cm">* application calls an observable object&#39;s notifyObservers method to have all</span>
<span class="tok-cm">* the object&#39;s observers notified of the change.</span>
<span class="tok-cm">*</span>
<span class="tok-cm">* Parameters:</span>
<span class="tok-cm">* o - the observable object</span>
<span class="tok-cm">* arg - an argument passed to the notifyObservers method</span>
<span class="tok-cm">*/</span>
<span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">update</span><span class="tok-o">(</span><span class="tok-n">Observable</span> <span class="tok-n">o</span><span class="tok-o">,</span> <span class="tok-n">Object</span> <span class="tok-n">arg</span><span class="tok-o">)</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_concrete_implementation_of_the_mvc_java_jtable">2. A concrete implementation of the MVC: Java JTable</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/JTable.png" alt="JTable">
</div>
<div class="title">Figure 3. This is not a JTable (Credit Justine, my beloved daugher!)</div>
</div>
<div class="sect2">
<h3 id="_principle">2.1. Principle</h3>
<div class="imageblock">
<div class="content">
<img src="images/TD6-MVC-1.png" alt="TD6 MVC 1">
</div>
<div class="title">Figure 4. JTable Principle</div>
</div>
</div>
<div class="sect2">
<h3 id="_architecture">2.2. Architecture</h3>
<div class="imageblock">
<div class="content">
<img src="images/JTable.jpg" alt="JTable">
</div>
<div class="title">Figure 5. JTable Architecture</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Adaptateur">3. Adaptor</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/adaptateur.jpg" alt="adaptateur">
</div>
</div>
<div class="sect2">
<h3 id="_problem">3.1. Problem</h3>
<div class="paragraph">
<p>We want to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use an existing class, but whose <strong>interface does not coincide</strong> with that expected.</p>
</li>
<li>
<p>create a reusable class that collaborates with unrelated classes
with it and still unknown, that is to say with classes that will not have <strong>necessarily compatible interfaces</strong>.</p>
</li>
<li>
<p>you need to use several existing subclasses, but
<strong>adaptation of their interface</strong> by derivation of each of them is
impracticable. An object adaptor can adapt the interface of its parent class.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This last case only concerns the case "object adapter"
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_concrete_example_back_on_ducks">3.2. Concrete example: back on Ducks</h3>
<div class="ulist">
<ul>
<li>
<p>What we have:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Canard</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">cancaner</span><span class="tok-o">();</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">voler</span><span class="tok-o">();</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Colvert</span> <span class="tok-kd">implements</span> <span class="tok-n">Canard</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">cancaner</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Coincoin&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">voler</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Je vole&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The "almost Canard"</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Dindon</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">glouglouter</span><span class="tok-o">();</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">voler</span><span class="tok-o">();</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">DindonSauvage</span> <span class="tok-kd">implements</span> <span class="tok-n">Dindon</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">glouglouter</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Glouglou&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">voler</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Je ne vole pas loin&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For some reason you don&#8217;t have access to <code>Canard</code> objects and you would like to use <code>Dindon</code> objects instead!</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/TurkeyToDuck.png" alt="TurkeyToDuck">
</div>
<div class="title">Figure 6. An "almost Canard" (Credit C. Aribaud, Blagnac Student 2016-2017)</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">AdaptateurDindon</span> <span class="tok-kd">implements</span> <span class="tok-n">Canard</span> <span class="tok-o">{</span>
  <span class="tok-n">Dindon</span> <span class="tok-n">dindon</span><span class="tok-o">;</span>

  <span class="tok-o">...</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">cancaner</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">dindon</span><span class="tok-o">.</span><span class="tok-na">glouglouter</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">voler</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-c1">// Adaptation du vol</span>
    <span class="tok-k">for</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">5</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++)</span> <span class="tok-o">{</span>
      <span class="tok-n">dindon</span><span class="tok-o">.</span><span class="tok-na">voler</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_adapter_pattern">3.3. The Adapter pattern</h3>
<div class="paragraph">
<p><strong>Adaptor</strong> allows you to convert the interface from one class to another
in accordance with customer expectations. The Adaptor allows classes of
collaborate, when they could not have done it because of interfaces
incompatible.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/adapteur.svg" alt="adapteur">
</div>
<div class="title">Figure 7. UML model of the Adaptor pattern</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/adaptor-google.png" alt="adaptor google">
</div>
<div class="title">Figure 8. Adaptater on Google</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_visitor_pattern">4. The Visitor pattern</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/les-visiteurs.jpg" alt="les visiteurs">
</div>
</div>
<div class="sect2">
<h3 id="_the_problem">4.1. The problem</h3>
<div class="paragraph">
<p>Here are some examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>structure</strong> of objects contains many different classes with separate interfaces, and you want to perform operations on these objects who depend on their concrete classes.</p>
</li>
<li>
<p>It involves performing several separate operations with no relation between
them, on the objects of a structure, and this by <strong>avoiding polluting their classes</strong> with these operations.</p>
</li>
<li>
<p>The classes that define the object structure rarely change, but we must
often <strong>define new operations</strong> on this structure.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_illustration">4.2. Illustration</h3>
<div class="paragraph">
<p>Adapted from an example taken here: <a href="http://www.tutorialspoint.com/design_pattern/visitor_pattern.htm" class="bare">http://www.tutorialspoint.com/design_pattern/visitor_pattern.htm</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor1.svg" alt="visitor1" width="100%">
</div>
<div class="title">Figure 9. A classical structure (without pattern)</div>
</div>
<div class="sect3">
<h4 id="_step_1">4.2.1. Step 1</h4>
<div class="paragraph">
<p>Define an interface to represent element.
Définir une interface pour représenter les éléments de la structure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor2.svg" alt="visitor2" width="100%">
</div>
<div class="title">Figure 10. Implementation of a hierarchy</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor3.svg" alt="visitor3" width="100%">
</div>
<div class="title">Figure 11. Use of an interface</div>
</div>
<div class="listingblock">
<div class="title">ComputerPart.java (extrait)</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ComputerPart</span> <span class="tok-o">{</span>
   <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_2">4.2.2. Step 2</h4>
<div class="paragraph">
<p>Anticipate the use of Visitor.</p>
</div>
<div class="listingblock">
<div class="title">ComputerPartVisitor.java (extrait)</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ComputerPartVisitor</span> <span class="tok-o">{</span>
	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ComputerPart.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ComputerPart</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">ComputerPartVisitor</span> <span class="tok-n">computerPartVisitor</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_3">4.2.3. Step 3</h4>
<div class="paragraph">
<p>Create concrete classes extending the above class.
Créer les classes concrètes qui implémentent l&#8217;interface.</p>
</div>
<div class="listingblock">
<div class="title">Keyboard.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Keyboard</span> <span class="tok-kd">implements</span> <span class="tok-n">ComputerPart</span> <span class="tok-o">{</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">ComputerPartVisitor</span> <span class="tok-n">computerPartVisitor</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">computerPartVisitor</span><span class="tok-o">.</span><span class="tok-na">visit</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="title">Computer.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Computer</span> <span class="tok-kd">implements</span> <span class="tok-n">ComputerPart</span> <span class="tok-o">{</span>

   <span class="tok-n">ComputerPart</span><span class="tok-o">[]</span> <span class="tok-n">parts</span><span class="tok-o">;</span>

   <span class="tok-kd">public</span> <span class="tok-nf">Computer</span><span class="tok-o">(){</span>
      <span class="tok-n">parts</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ComputerPart</span><span class="tok-o">[]</span> <span class="tok-o">{</span><span class="tok-k">new</span> <span class="tok-n">Mouse</span><span class="tok-o">(),</span> <span class="tok-k">new</span> <span class="tok-n">Keyboard</span><span class="tok-o">(),</span> <span class="tok-k">new</span> <span class="tok-n">Monitor</span><span class="tok-o">()};</span>
   <span class="tok-o">}</span>


   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">ComputerPartVisitor</span> <span class="tok-n">computerPartVisitor</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">parts</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++)</span> <span class="tok-o">{</span>
         <span class="tok-n">parts</span><span class="tok-o">[</span><span class="tok-n">i</span><span class="tok-o">].</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">computerPartVisitor</span><span class="tok-o">);</span>
      <span class="tok-o">}</span>
      <span class="tok-n">computerPartVisitor</span><span class="tok-o">.</span><span class="tok-na">visit</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_4">4.2.4. Step 4</h4>
<div class="paragraph">
<p>Define an interface to represent visitor.
Définir l&#8217;interface pour représenter le Visitor.</p>
</div>
<div class="listingblock">
<div class="title">ComputerPartVisitor.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ComputerPartVisitor</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Computer</span> <span class="tok-n">computer</span><span class="tok-o">);</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Mouse</span> <span class="tok-n">mouse</span><span class="tok-o">);</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Keyboard</span> <span class="tok-n">keyboard</span><span class="tok-o">);</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Monitor</span> <span class="tok-n">monitor</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_5">4.2.5. Step 5</h4>
<div class="paragraph">
<p>Create concrete visitor implementing the above class.
Créer des Visitors concrets.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor4.svg" alt="visitor4" width="100%">
</div>
<div class="title">Figure 12. Visitor : l&#8217;interface</div>
</div>
<div class="listingblock">
<div class="title">DisplayVisitor.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">DisplayVisitor</span> <span class="tok-kd">implements</span> <span class="tok-n">ComputerPartVisitor</span> <span class="tok-o">{</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Computer</span> <span class="tok-n">computer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Displaying Computer.&quot;</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Mouse</span> <span class="tok-n">mouse</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Displaying Mouse.&quot;</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Keyboard</span> <span class="tok-n">keyboard</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Displaying Keyboard.&quot;</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>

   <span class="tok-nd">@Override</span>
   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Monitor</span> <span class="tok-n">monitor</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Displaying Monitor.&quot;</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_6">4.2.6. Step 6</h4>
<div class="paragraph">
<p>Use the <code>DisplayVisitor</code> to display parts of Computer.
Utiliser le Visitor <code>DisplayVisitor</code>.</p>
</div>
<div class="listingblock">
<div class="title">VisitorPatternDemo.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">VisitorPatternDemo</span> <span class="tok-o">{</span>
   <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

      <span class="tok-n">ComputerPart</span> <span class="tok-n">computer</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Computer</span><span class="tok-o">();</span>
      <span class="tok-n">computer</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">DisplayVisitor</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_step_7_final">4.2.7. Step 7 (final)</h4>
<div class="paragraph">
<p>Verify the output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>Displaying Mouse.
Displaying Keyboard.
Displaying Monitor.
Displaying Computer.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_visitor_pattern_2">4.3. The Visitor pattern</h3>
<div class="paragraph">
<p><strong>Visitor</strong> allows the representation of an operation that is applicable
to different elements of an object structure.</p>
</div>
<div class="paragraph">
<p>It defines a new operation, <strong>without modifying the class</strong>!.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor-dc.svg" alt="visitor dc" width="100%">
</div>
<div class="title">Figure 13. Patron Visitor : structure</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor-seq.png" alt="visitor seq" width="100%">
</div>
<div class="title">Figure 14. Patron Visitor : behavior</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor-google.png" alt="visitor google" width="100%">
</div>
<div class="title">Figure 15. Visitor on Google</div>
</div>
</div>
<div class="sect2">
<h3 id="_avantagesdrawbacks">4.4. Avantages/Drawbacks</h3>
<div class="paragraph">
<p>Avantages :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allows you to add operations to the structure of a Composite <strong>without modifying the structure itself</strong>.</p>
</li>
<li>
<p>Adding new operations is relatively easy.</p>
</li>
<li>
<p>The code of operations performed by the Visitor is <strong>centralized</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Drawbacks :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The encapsulation principle of the Composite classes is broken.</p>
</li>
<li>
<p>As a navigation fonctionis implied, all modifications on the structure of Composite is more complicated.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_examples">4.5. Examples</h3>
<div class="ulist">
<ul>
<li>
<p>calcul sur un ensemble structuré d&#8217;éléments</p>
</li>
<li>
<p>génération de rapports ou de code</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example_in_java">4.6. Example in Java</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Example taken form <a href="http://www.journaldev.com/1769/visitor-design-pattern-in-java-example-tutorial">here</a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">ItemElement.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ItemElement</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">ShoppingCartVisitor</span> <span class="tok-n">visitor</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Book.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Book</span> <span class="tok-kd">implements</span> <span class="tok-n">ItemElement</span> <span class="tok-o">{</span>

  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">price</span><span class="tok-o">;</span>
  <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">isbnNumber</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-nf">Book</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">cost</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">isbn</span><span class="tok-o">){</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">price</span><span class="tok-o">=</span><span class="tok-n">cost</span><span class="tok-o">;</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">isbnNumber</span><span class="tok-o">=</span><span class="tok-n">isbn</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">getPrice</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">price</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getIsbnNumber</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">isbnNumber</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">ShoppingCartVisitor</span> <span class="tok-n">visitor</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">visitor</span><span class="tok-o">.</span><span class="tok-na">visit</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Fruit.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fruit</span> <span class="tok-kd">implements</span> <span class="tok-n">ItemElement</span> <span class="tok-o">{</span>

  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">pricePerKg</span><span class="tok-o">;</span>
  <span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
  <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-nf">Fruit</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">priceKg</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">wt</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">nm</span><span class="tok-o">){</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">pricePerKg</span><span class="tok-o">=</span><span class="tok-n">priceKg</span><span class="tok-o">;</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">weight</span><span class="tok-o">=</span><span class="tok-n">wt</span><span class="tok-o">;</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">nm</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">getPricePerKg</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">pricePerKg</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">getWeight</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getName</span><span class="tok-o">(){</span>
    <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">ShoppingCartVisitor</span> <span class="tok-n">visitor</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-n">visitor</span><span class="tok-o">.</span><span class="tok-na">visit</span><span class="tok-o">(</span><span class="tok-k">this</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ShoppingCartVisitor.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ShoppingCartVisitor</span> <span class="tok-o">{</span>

  <span class="tok-kt">int</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Book</span> <span class="tok-n">book</span><span class="tok-o">);</span>
  <span class="tok-kt">int</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Fruit</span> <span class="tok-n">fruit</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ShoppingCartVisitorImpl.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ShoppingCartVisitorImpl</span> <span class="tok-kd">implements</span> <span class="tok-n">ShoppingCartVisitor</span> <span class="tok-o">{</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Book</span> <span class="tok-n">book</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">cost</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>
    <span class="tok-c1">//apply 5$ discount if book price is greater than 50</span>
    <span class="tok-k">if</span><span class="tok-o">(</span><span class="tok-n">book</span><span class="tok-o">.</span><span class="tok-na">getPrice</span><span class="tok-o">()</span> <span class="tok-o">&gt;</span> <span class="tok-mi">50</span><span class="tok-o">){</span>
      <span class="tok-n">cost</span> <span class="tok-o">=</span> <span class="tok-n">book</span><span class="tok-o">.</span><span class="tok-na">getPrice</span><span class="tok-o">()-</span><span class="tok-mi">5</span><span class="tok-o">;</span>
    <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-n">cost</span> <span class="tok-o">=</span> <span class="tok-n">book</span><span class="tok-o">.</span><span class="tok-na">getPrice</span><span class="tok-o">();</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Book ISBN::&quot;</span><span class="tok-o">+</span><span class="tok-n">book</span><span class="tok-o">.</span><span class="tok-na">getIsbnNumber</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; cost =&quot;</span><span class="tok-o">+</span><span class="tok-n">cost</span><span class="tok-o">);</span>
    <span class="tok-k">return</span> <span class="tok-n">cost</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">visit</span><span class="tok-o">(</span><span class="tok-n">Fruit</span> <span class="tok-n">fruit</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">cost</span> <span class="tok-o">=</span> <span class="tok-n">fruit</span><span class="tok-o">.</span><span class="tok-na">getPricePerKg</span><span class="tok-o">()*</span><span class="tok-n">fruit</span><span class="tok-o">.</span><span class="tok-na">getWeight</span><span class="tok-o">();</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">fruit</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; cost = &quot;</span><span class="tok-o">+</span><span class="tok-n">cost</span><span class="tok-o">);</span>
    <span class="tok-k">return</span> <span class="tok-n">cost</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ShoppingCartClient.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ShoppingCartClient</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">ItemElement</span><span class="tok-o">[]</span> <span class="tok-n">items</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ItemElement</span><span class="tok-o">[]{</span><span class="tok-k">new</span> <span class="tok-n">Book</span><span class="tok-o">(</span><span class="tok-mi">20</span><span class="tok-o">,</span> <span class="tok-s">&quot;1234&quot;</span><span class="tok-o">),</span><span class="tok-k">new</span> <span class="tok-n">Book</span><span class="tok-o">(</span><span class="tok-mi">100</span><span class="tok-o">,</span> <span class="tok-s">&quot;5678&quot;</span><span class="tok-o">),</span>
    <span class="tok-k">new</span> <span class="tok-n">Fruit</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-s">&quot;Banana&quot;</span><span class="tok-o">),</span> <span class="tok-k">new</span> <span class="tok-n">Fruit</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-s">&quot;Apple&quot;</span><span class="tok-o">)};</span>

    <span class="tok-kt">int</span> <span class="tok-n">total</span> <span class="tok-o">=</span> <span class="tok-n">calculatePrice</span><span class="tok-o">(</span><span class="tok-n">items</span><span class="tok-o">);</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Total Cost = &quot;</span><span class="tok-o">+</span><span class="tok-n">total</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kt">int</span> <span class="tok-nf">calculatePrice</span><span class="tok-o">(</span><span class="tok-n">ItemElement</span><span class="tok-o">[]</span> <span class="tok-n">items</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">ShoppingCartVisitor</span> <span class="tok-n">visitor</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ShoppingCartVisitorImpl</span><span class="tok-o">();</span>
    <span class="tok-kt">int</span> <span class="tok-n">sum</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>
    <span class="tok-k">for</span><span class="tok-o">(</span><span class="tok-n">ItemElement</span> <span class="tok-n">item</span> <span class="tok-o">:</span> <span class="tok-n">items</span><span class="tok-o">){</span>
      <span class="tok-n">sum</span> <span class="tok-o">=</span> <span class="tok-n">sum</span> <span class="tok-o">+</span> <span class="tok-n">item</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">visitor</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
    <span class="tok-k">return</span> <span class="tok-n">sum</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Book ISBN::1234 cost =20
Book ISBN::5678 cost =95
Banana cost = 20
Apple cost = 25
Total Cost = 160</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Proxy">5. Proxy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_problem_2">5.1. The problem</h3>
<div class="paragraph">
<p>We need references to an object, which are more <strong>creative</strong> and more
<strong>sophisticated</strong> than a simple pointer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_proxy_pattern">5.2. The <em>Proxy</em> pattern</h3>
<div class="paragraph">
<p><strong>Proxy</strong> provides a third party with an agent or a replacement to monitor
access to this object.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proxy.svg" alt="proxy" width="60%">
</div>
<div class="title">Figure 16. UML model of the <em>Proxy</em> pattern</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proxy-google.png" alt="proxy google">
</div>
<div class="title">Figure 17. Proxy on Google</div>
</div>
</div>
<div class="sect2">
<h3 id="_usage">5.3. Usage</h3>
<div class="ulist">
<ul>
<li>
<p>A remote proxy provides a local representative of an object
located in a different address space.</p>
</li>
<li>
<p>A <em>procuration virtual</em> creates heavy objects on demand.</p>
</li>
<li>
<p>A protection proxy controls access to the original object.
Protective powers of attorney are useful when objects must meet
different access rights.</p>
</li>
<li>
<p>A smart reference is the replacement for a raw pointer, which
performs additional operations when accessing the object. A few
typical uses are:</p>
<div class="ulist">
<ul>
<li>
<p>count of the number of references made to a real object, so that it can be released automatically, as soon as there are no more references;</p>
</li>
<li>
<p>load in memory a persistent object when it is referenced for the first time;</p>
</li>
<li>
<p>check, before accessing it, that the real object is locked, to be sure that no other object can change it.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_concrete_example_rmi">5.4. Concrete Example: RMI</h3>
<div class="paragraph">
<p><strong>R</strong>emote <strong>M</strong>ethod <strong>I</strong>nvocation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.rmi.*</span><span class="tok-o">;</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MonService</span> <span class="tok-kd">extends</span> <span class="tok-n">Remote</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">direBonjour</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">RemoteException</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.rmi.*</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.rmi.server.*</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MonServiceImpl</span> <span class="tok-kd">extends</span> <span class="tok-n">UnicastRemoteObject</span> <span class="tok-kd">implements</span> <span class="tok-n">MonService</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">direBonjour</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-s">&quot;Le serveur dit &#39;Bonjour&#39;&quot;</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
  <span class="tok-kd">public</span> <span class="tok-nf">MonServiceImpl</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">RemoteException</span> <span class="tok-o">{}</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span> <span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">try</span> <span class="tok-o">{</span>
      <span class="tok-n">MonService</span> <span class="tok-n">service</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MonServiceImpl</span><span class="tok-o">();</span>
      <span class="tok-n">Naming</span><span class="tok-o">.</span><span class="tok-na">rebind</span><span class="tok-o">(</span><span class="tok-s">&quot;BonjourDistant&quot;</span><span class="tok-o">,</span> <span class="tok-n">service</span><span class="tok-o">);</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">Exception</span> <span class="tok-n">ex</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">ex</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">MonService</span> <span class="tok-n">service</span> <span class="tok-o">=</span>
  <span class="tok-o">(</span><span class="tok-n">MonService</span><span class="tok-o">)</span> <span class="tok-n">Naming</span><span class="tok-o">.</span><span class="tok-na">lookup</span><span class="tok-o">(</span><span class="tok-s">&quot;rmi://127.0.0.1/BonjourDistant&quot;</span><span class="tok-o">);</span>
<span class="tok-o">...</span>
<span class="tok-n">service</span><span class="tok-o">.</span><span class="tok-na">direBonjour</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Itérateur">6. Iterator</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_problem_3">6.1. The problem</h3>
<div class="paragraph">
<p>We want to be able:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to access the content of an object of an aggregate without revealing its
internal representation;</p>
</li>
<li>
<p>to manage several routes simultaneously in object aggregates;</p>
</li>
<li>
<p>to offer a uniform interface for routes through
various aggregate structures (i.e., to allow iteration
polymorphic).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_iterator_pattern">6.2. The Iterator pattern</h3>
<div class="paragraph">
<p><strong><em>Iterator</em></strong> provides a means of sequential access to elements
of an aggregate of objects, without exposing the internal representation of
this one.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/iterateur.svg" alt="iterateur">
</div>
<div class="title">Figure 18. UML model of the Iterator</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/iterateur-google.png" alt="iterateur google">
</div>
<div class="title">Figure 19. Iterator on Google</div>
</div>
</div>
<div class="sect2">
<h3 id="_concrete_example">6.3. Concrete Example</h3>
<div class="paragraph">
<p>Here is a Ruby example:</p>
</div>
<div class="listingblock">
<div class="title">Iterator Ruby</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ruby"><span></span><span class="tok-c1"># Saluer tout le monde</span>
<span class="tok-k">def</span> <span class="tok-nf">say_hi</span>
  <span class="tok-k">if</span> <span class="tok-vi">@names</span><span class="tok-o">.</span><span class="tok-n">nil?</span>
    <span class="tok-nb">puts</span> <span class="tok-s2">&quot;...&quot;</span>
  <span class="tok-k">elsif</span> <span class="tok-vi">@names</span><span class="tok-o">.</span><span class="tok-n">respond_to?</span><span class="tok-p">(</span><span class="tok-s2">&quot;each&quot;</span><span class="tok-p">)</span>
    <span class="tok-c1"># @names est une liste de noms : traitons-les uns par uns</span>
    <span class="tok-vi">@names</span><span class="tok-o">.</span><span class="tok-n">each</span> <span class="tok-k">do</span> <span class="tok-o">|</span><span class="tok-nb">name</span><span class="tok-o">|</span>
      <span class="tok-nb">puts</span> <span class="tok-s2">&quot;Hello </span><span class="tok-si">#{</span><span class="tok-nb">name</span><span class="tok-si">}</span><span class="tok-s2">!&quot;</span>
    <span class="tok-k">end</span>
  <span class="tok-k">else</span>
    <span class="tok-nb">puts</span> <span class="tok-s2">&quot;Hello </span><span class="tok-si">#{</span><span class="tok-vi">@names</span><span class="tok-si">}</span><span class="tok-s2">!&quot;</span>
  <span class="tok-k">end</span>
<span class="tok-k">end</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Composite">7. The Composite pattern</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_problem_4">7.1. The problem</h3>
<div class="paragraph">
<p>We want to be able to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>represent hierarchies of the individual.</p>
</li>
<li>
<p>that the customer does not have to worry about the difference between
"combinations of objects" and "individual objects". Customers will be able to process
uniformly all the objects of the composite structure.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_composite_pattern">7.2. The Composite pattern</h3>
<div class="paragraph">
<p><strong>Composite</strong>  allows you to compose objects into tree structures
to represent component / compound hierarchies.
Allows the customer to treat objects and combinations in a unique way
of objects.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/composite.svg" alt="composite">
</div>
<div class="title">Figure 20. UML model of Composite</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/composite-google.png" alt="composite google">
</div>
<div class="title">Figure 21. Composite sur Google</div>
</div>
</div>
<div class="sect2">
<h3 id="_concrete_example_2">7.3. Concrete Example</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">java.util.ArrayList</span><span class="tok-o">;</span>

<span class="tok-kd">interface</span> <span class="tok-nc">Graphic</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">print</span><span class="tok-o">();</span>
<span class="tok-o">}</span>

<span class="tok-kd">class</span> <span class="tok-nc">CompositeGraphic</span> <span class="tok-kd">implements</span> <span class="tok-n">Graphic</span> <span class="tok-o">{</span>

  <span class="tok-kd">private</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">Graphic</span><span class="tok-o">&gt;</span> <span class="tok-n">mChildGraphics</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">Graphic</span><span class="tok-o">&gt;();</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">print</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Graphic</span> <span class="tok-n">graphic</span> <span class="tok-o">:</span> <span class="tok-n">mChildGraphics</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">graphic</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">add</span><span class="tok-o">(</span><span class="tok-n">Graphic</span> <span class="tok-n">graphic</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">mChildGraphics</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">graphic</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">remove</span><span class="tok-o">(</span><span class="tok-n">Graphic</span> <span class="tok-n">graphic</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">mChildGraphics</span><span class="tok-o">.</span><span class="tok-na">remove</span><span class="tok-o">(</span><span class="tok-n">graphic</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_an_anti_example">7.4. An "Anti" example</h3>
<div class="paragraph">
<p>What do you think of this Composite structure ?</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/anti-composite.png" alt="anti composite">
</div>
<div class="title">Figure 22. Wrong composite pattern</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_back_on_the_refactoring_bank">8. Back on the refactoring Bank</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_problem_5">8.1. The problem</h3>
<div class="imageblock">
<div class="content">
<img src="images/refactoring1.png" alt="refactoring1">
</div>
</div>
<div class="paragraph">
<p>Replace the <code>switch cases</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">continuer</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
<span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-n">continuer</span><span class="tok-o">)</span> <span class="tok-o">{</span>
  <span class="tok-n">AAB</span><span class="tok-o">.</span><span class="tok-na">afficherMenu</span><span class="tok-o">(</span><span class="tok-n">monAg</span><span class="tok-o">);</span>
  <span class="tok-n">choix</span> <span class="tok-o">=</span> <span class="tok-n">lect</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
  <span class="tok-n">choix</span> <span class="tok-o">=</span> <span class="tok-n">choix</span><span class="tok-o">.</span><span class="tok-na">toLowerCase</span><span class="tok-o">();</span>
  <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">choix</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-o">...</span>
    <span class="tok-k">case</span> <span class="tok-s">&quot;p&quot;</span> <span class="tok-o">:</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-s">&quot;Propriétaire -&gt; &quot;</span><span class="tok-o">);</span>
      <span class="tok-n">nom</span> <span class="tok-o">=</span> <span class="tok-n">lect</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
      <span class="tok-n">AAB</span><span class="tok-o">.</span><span class="tok-na">comptesDUnPropretaire</span> <span class="tok-o">(</span><span class="tok-n">monAg</span><span class="tok-o">,</span> <span class="tok-n">nom</span><span class="tok-o">);</span>
    <span class="tok-k">break</span><span class="tok-o">;</span>
    <span class="tok-o">...</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Displat a list separately from the switch</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-c1">//AAB.afficherMenu(monAg);</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Menu de &quot;</span> <span class="tok-o">+</span> <span class="tok-n">ag</span><span class="tok-o">.</span><span class="tok-na">getNomAgence</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; (&quot;</span> <span class="tok-o">+</span> <span class="tok-n">ag</span><span class="tok-o">.</span><span class="tok-na">getLocAgence</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;)&quot;</span><span class="tok-o">);</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;l - Liste des comptes de l&#39;agence&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">...</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;p - voir les comptes d&#39;un Propriétaire (par son nom)&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">...</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-s">&quot;Choix -&gt; &quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Test all choices to launch the good option</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>  <span class="tok-o">...</span>
  <span class="tok-k">case</span> <span class="tok-s">&quot;p&quot;</span> <span class="tok-o">:</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-s">&quot;Propriétaire -&gt; &quot;</span><span class="tok-o">);</span>
    <span class="tok-n">nom</span> <span class="tok-o">=</span> <span class="tok-n">lect</span><span class="tok-o">.</span><span class="tok-na">next</span><span class="tok-o">();</span>
    <span class="tok-n">AAB</span><span class="tok-o">.</span><span class="tok-na">comptesDUnPropretaire</span> <span class="tok-o">(</span><span class="tok-n">monAg</span><span class="tok-o">,</span> <span class="tok-n">nom</span><span class="tok-o">);</span>
  <span class="tok-k">break</span><span class="tok-o">;</span>
  <span class="tok-o">...</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_a_solution">8.2. A solution</h3>
<div class="ulist">
<ul>
<li>
<p>Some lists</p>
</li>
<li>
<p>Menu options that encapsulate the action to be performed</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ActionList</span> <span class="tok-kd">extends</span> <span class="tok-n">Action</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">listTitle</span><span class="tok-o">();</span>
  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">size</span><span class="tok-o">();</span>

  <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">addAction</span><span class="tok-o">(</span><span class="tok-n">Action</span> <span class="tok-n">ac</span><span class="tok-o">);</span>
  <span class="tok-kd">public</span> <span class="tok-kt">boolean</span> <span class="tok-nf">removeAction</span><span class="tok-o">(</span><span class="tok-n">Action</span> <span class="tok-n">ac</span><span class="tok-o">);</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-nf">listOfActions</span><span class="tok-o">()</span> <span class="tok-o">;</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">An interface for the menu options</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Action</span>  <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">actionMessage</span> <span class="tok-o">();</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">(</span><span class="tok-n">AgenceBancaire</span> <span class="tok-n">ag</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">A concrete class for each menu option</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Action1</span> <span class="tok-kd">implements</span> <span class="tok-n">Action</span> <span class="tok-o">{</span>

  <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">lineMessage</span><span class="tok-o">;</span>

  <span class="tok-o">...</span>
  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">actionMessage</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-k">return</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">lineMessage</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">(</span><span class="tok-n">AgenceBancaire</span> <span class="tok-n">ab</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>
    <span class="tok-n">ab</span><span class="tok-o">.</span><span class="tok-na">afficher</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Execution of the action</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span>  <span class="tok-n">action</span><span class="tok-o">.</span><span class="tok-na">execute</span><span class="tok-o">(</span><span class="tok-n">ab</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Link between list and action</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">Action</span> <span class="tok-n">a1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Action1</span><span class="tok-o">(</span><span class="tok-s">&quot;Liste des comptes de l&#39;agence&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Action</span> <span class="tok-n">a2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Action2</span><span class="tok-o">(</span><span class="tok-s">&quot;Voir un compte (par son numéro)&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Action</span> <span class="tok-n">a3</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Action3</span><span class="tok-o">(...);</span>

<span class="tok-n">ActionList</span> <span class="tok-n">al1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ActionListAgenceBancaire</span><span class="tok-o">(</span><span class="tok-s">&quot;Menu Général&quot;</span><span class="tok-o">);</span>

<span class="tok-n">al1</span><span class="tok-o">.</span><span class="tok-na">addAction</span><span class="tok-o">(</span><span class="tok-n">a1</span><span class="tok-o">);</span>
<span class="tok-n">al1</span><span class="tok-o">.</span><span class="tok-na">addAction</span><span class="tok-o">(</span><span class="tok-n">a2</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Link between list and action : choice in the list</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">execute</span><span class="tok-o">(</span><span class="tok-n">AgenceBancaire</span> <span class="tok-n">ab</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span> <span class="tok-o">{</span>
  <span class="tok-o">...</span>
  <span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">printMenu</span><span class="tok-o">();</span>

    <span class="tok-n">choice</span> <span class="tok-o">=</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">readResponse</span><span class="tok-o">();</span>
    <span class="tok-o">...</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">myMenu</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">choice</span><span class="tok-o">).</span><span class="tok-na">execute</span><span class="tok-o">(</span><span class="tok-n">ab</span><span class="tok-o">);</span>
    <span class="tok-o">...</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">The list can itself be an option (an action)!</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ActionList</span> <span class="tok-kd">extends</span> <span class="tok-n">Action</span> <span class="tok-o">{</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_one_step_beyond">9. One step beyond&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/plusloin.jpg" alt="plusloin">
</div>
<div class="title">Figure 23. Crédit photo : <a href="http://blogs.radiocanut.org/" class="bare">http://blogs.radiocanut.org/</a></div>
</div>
<div class="sect2">
<h3 id="_share_the_same_vocabulary">9.1. Share the same vocabulary</h3>
<div class="ulist">
<ul>
<li>
<p>In design meetings (not necessarily with the client)</p>
</li>
<li>
<p>With other developers</p>
</li>
<li>
<p>In the documentation of your architecture</p>
</li>
<li>
<p>In code comments and naming conventions</p>
</li>
<li>
<p>In developer groups / blogs</p>
</li>
<li>
<p>(not during exams!)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dont_go_too_fast">9.2. Don&#8217;t go too fast</h3>
<div class="paragraph">
<p>Some advices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Patterns are <strong>tools, not rules</strong>.</p>
<div class="paragraph">
<p>&#8658; Nothing prevents to modify and adapt them to your
problem.</p>
</div>
</li>
<li>
<p>Aim for extensibility <strong>only if the question really arises</strong> in practice,
not if it is only hypothetical.</p>
</li>
<li>
<p>Don&#8217;t get carried away and <strong>look for simplicity</strong>.</p>
<div class="paragraph">
<p>&#8658; If you find a simpler solution than using a pattern, don&#8217;t hesitate!</p>
</div>
</li>
<li>
<p>eliminate what is not really necessary.</p>
<div class="paragraph">
<p>&#8658; Don&#8217;t be afraid to <strong>remove an unnecessary design pattern</strong> from your design.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_other_types_of_patterns">9.3. Other types of patterns</h3>
<div class="ulist">
<ul>
<li>
<p>Creation</p>
</li>
<li>
<p>Structure</p>
</li>
<li>
<p>Behavioral</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some more types :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Architectural patterns</p>
</li>
<li>
<p>Application patterns</p>
</li>
<li>
<p>Domain patterns</p>
</li>
<li>
<p>Processus patterns</p>
</li>
<li>
<p>Organisational patterns</p>
</li>
<li>
<p>UI design patterns</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_anti_patterns">9.4. Anti-patterns</h3>
<div class="imageblock">
<div class="content">
<img src="images/anti-patrons.jpg" alt="anti patrons">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Solutions often <strong>wrongly applied</strong> to recurring problems</p>
</li>
<li>
<p>Describes how to start from a problem to arrive at a <strong>bad solution</strong></p>
</li>
<li>
<p>Tells you <strong>why</strong> a bad solution is attractive</p>
</li>
<li>
<p>Suggest other applicable patterns that can provide better solutions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_remaining_ones">9.5. The remaining ones</h3>
<div class="paragraph">
<p>Many of them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Chain of responsibility</p>
</li>
<li>
<p>Command</p>
</li>
<li>
<p>Decorator</p>
</li>
<li>
<p>Façade</p>
</li>
<li>
<p>Interpreter</p>
</li>
<li>
<p>Mediator</p>
</li>
<li>
<p>Memento</p>
</li>
<li>
<p>Bridge</p>
</li>
<li>
<p>Prototype</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary_definitions">Glossary &amp; definitions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_creation_patterns">Creation patterns</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Singleton</dt>
<dd>
<p><strong>Singleton</strong> garanties that a class as a unique instance and hence provides a global access to this unique instance.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/singleton.png" alt="singleton">
</div>
<div class="title">Figure 24. UML model of the <em>Singleton</em> pattern</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Fabrique</dt>
<dd>
<p><strong>Factory</strong> defines an interface for creating an objet, but leaving to its subclasses
the choice of the class to be instanciated (see also <a href="#FabriqueAbstraite">Abstract Factory</a>).</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/factory.svg" alt="factory">
</div>
<div class="title">Figure 25. UML model of the Factory pattern</div>
</div>
</div>
<div class="sect2">
<h3 id="_behavioral_patterns">Behavioral patterns</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">État (<em>State<sup>uk</sup></em>)</dt>
<dd>
<p><strong>Etat</strong> permet à un objet de modifier son comportement,
quand son état interne change.
Tout se passe comme si l&#8217;objet changeait de classe.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/etat.png" alt="etat">
</div>
<div class="title">Figure 26. Modèle UML du patron Etat</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Itérateur (<em>Iterator<sup>uk</sup></em>)</dt>
<dd>
<p><strong><em>Iterator</em></strong> provides a means of sequential access to elements
of an aggregate of objects, without exposing the internal representation of
this one.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/iterateur.svg" alt="iterateur">
</div>
<div class="title">Figure 27. UML model of the Iterator</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Observateur (<em>Observer<sup>uk</sup></em>)</dt>
<dd>
<p><strong>Observer</strong> defines a relationship between objects of type
one-to-many, so that when an object changes state,
all those who depend on it are notified and updated
automatically.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/observer.png" alt="observer">
</div>
<div class="title">Figure 28. UML model of <em>Observer</em></div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Stratégie (<em>Strategy<sup>uk</sup></em>)</dt>
<dd>
<p><strong>Strategy</strong> defines a familly of algorithms/features/behaviour, implements each of them and makes them interchangeable.
It allows the algorithm to be independant of the "clients" that use it.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/strategy.svg" alt="strategy">
</div>
<div class="title">Figure 29. UML model of <em>Strategy</em></div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Visiteur (<em>Visitor<sup>uk</sup></em>)</dt>
<dd>
<p><strong>Visiteur</strong> (<strong><em>Visitor</em></strong>) permet la représentation d&#8217;une opération applicable
aux éléments d&#8217;une structure d&#8217;objet. Il définit une nouvelle opération,
sans qu&#8217;il soit nécessaire de modifier la classe des éléments sur lesquels
elle agit.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor-dc.svg" alt="visitor dc">
</div>
<div class="title">Figure 30. Patron Visiteur : structure</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/visitor-seq.png" alt="visitor seq">
</div>
<div class="title">Figure 31. Patron Visiteur : comportement</div>
</div>
</div>
<div class="sect2">
<h3 id="_structural_patterns">Structural patterns</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Adaptateur (<em>Adaptor<sup>uk</sup></em>)</dt>
<dd>
<p><strong>Adaptor</strong> allows you to convert the interface from one class to another
in accordance with customer expectations. The Adaptor allows classes of
collaborate, when they could not have done it because of interfaces
incompatible.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/adapteur.svg" alt="adapteur">
</div>
<div class="title">Figure 32. UML model of the Adaptor pattern</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Composite</dt>
<dd>
<p><strong>Composite</strong>  allows you to compose objects into tree structures
to represent component / compound hierarchies.
Allows the customer to treat objects and combinations in a unique way
of objects.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/composite.svg" alt="composite">
</div>
<div class="title">Figure 33. UML model of Composite</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Procuration (<em>Proxy<sup>uk</sup></em>)</dt>
<dd>
<p><strong>Proxy</strong> provides a third party with an agent or a replacement to monitor
access to this object.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proxy.svg" alt="proxy" width="60%">
</div>
<div class="title">Figure 34. UML model of the <em>Proxy</em> pattern</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="refs">Références</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="Cysboy"></a>[Cysboy] Apprenez à programmer en Java. Par <code>cysboy</code>. Disponible <a href="https://app.box.com/shared/yrlj0takyhjeg1mefacy">here</a> (le 2020-04-17).</p>
</li>
<li>
<p><a id="Freeman04"></a>[Freeman04] Design Pattren - Head First. Bert Bates, Eric Freeman, Elisabeth Freeman, Kathy Sierra. O&#8217;Reilly, 09/2004.</p>
</li>
<li>
<p><a id="Freeman05"></a>[Freeman05] Tête la première : Design Pattern. Bert Bates, Eric Freeman, Elisabeth Freeman, Kathy Sierra. Editions O&#8217;Reilly. 2005.</p>
</li>
<li>
<p><a id="GoF"></a>[GoF] Design Patterns: Elements of reusable object oriented software. 1994.</p>
</li>
<li>
<p>GOPROD - De bonnes pratiques au service de la conception orientée objets. Disponible <a href="http://www.goprod.bouhours.net">here</a> (le 2020-04-17).</p>
</li>
<li>
<p><a id="Larman05"></a>[Larman05] Larman, Craig. Applying UML and Patterns – An Introduction to Object-Oriented Analysis and Design
and Iterative Development (3rd ed.). Prentice Hall. 2005. ISBN 0-13-148906-2.</p>
</li>
<li>
<p><a id="Martin03"></a>[Martin03] “Principles Of OOD”, Robert C. Martin (“Uncle BOB”), <a href="http://butunclebob.com" class="bare">http://butunclebob.com</a>.</p>
</li>
<li>
<p><a id="Meyer88"></a>[Meyer88] Meyer, Bertrand. Object-Oriented Software Construction. Prentice Hall. 1988. ISBN 0-13-629049-3.</p>
</li>
<li>
<p><a id="SOLID"></a>[SOLID] <a href="https://blogs.msdn.microsoft.com/cdndevs/2009/07/15/the-solid-principles-explained-with-motivational-posters/" class="bare">https://blogs.msdn.microsoft.com/cdndevs/2009/07/15/the-solid-principles-explained-with-motivational-posters/</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.9<br>
Last updated 2020-04-17 00:36:40 +0200
</div>
</div>
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments  { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</body>
</html>